<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>Javascript Annotator</title>
    <link rel="stylesheet" href="codemirror.css" type="text/css">
    <link rel="stylesheet" href="index.css" type="text/css">
    <script src="util.js" type="text/javascript"></script>
  </head>
  <body>
    <details><summary> The Javascript Annotator allows annotations to be generated by
        executing a program or expression written in JavaScript. </summary> 
    
      <p> The layer manager has two modes of operation: </p>
      
      <dl>
        <dt><b> Label Mapping </b></dt>
        <dd>
          <details>
            <summary>New annotation labels are generated from a small JavaScript expression
              operating on the label from a given source layer.</summary>
            
            <p> The label of each annotation from the source layer directly generates the label
              of one annotation on the destination layer.  </p>
            
            <p> For each distinct label on the source layer, the specified expression is executed
              on the label, and the result of the expression is saved on the destination
              layer. </p>
            
            <p>Some illustrative examples:</p>
            <ul>
              <li><code>length</code> - saves the length of the source label on the destination layer,
                <br> e.g. <q>test</q> → <q>4</q> </li> 
              <li><code>toUpperCase()</code> - converts all lowercase letters to uppercase,
                <br> e.g. <q>test</q> → <q>TEST</q> </li> 
              <li><code>replace(/[aeiou]/g,"")</code> - removes all vowels,
                <br> e.g. <q>test</q> → <q>tst</q> </li> 
              <li><code>replace(/[aeiou]/g,"V").replace(/[^aeiou]/g,"C")</code>
                - replaces all vowels with V and all non-vowels with C,
                <br> e.g. <q>test</q> → <q>CVCC</q></li>
            </ul>

            <details>
              <summary>Any operation or string of operations that would work on a
                JavaScript String object are valid.</summary>

              <p>The following is a list of valid string operations, curtesy
                of <a href="http://www.w3schools.com/jsref/jsref_obj_string.asp"
                      target="W3Schools">W3 Schools</a></p> 
              
              <table>
                <tbody><tr>
                    <th style="width:24%">Method</th>
                    <th>Description</th>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_charat.asp">charAt(index)</a></td>
                    <td>Returns the character at the specified index (position)</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_charcodeat.asp">charCodeAt(index)</a></td>
                    <td>Returns the Unicode of the character at the specified 
	              index</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_concat_string.asp">concat(string1, string2, ..., stringX)</a></td>
                    <td>Joins two or more strings, and returns a new joined strings</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_endswith.asp">endsWith(searchvalue,length)</a></td>
                    <td>Checks whether a string ends with specified string/characters</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_includes.asp">includes(searchvalue,start)</a></td>
                    <td>Checks whether a string contains the specified string/characters</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_indexof.asp">indexOf(searchvalue,start)</a></td>
                    <td>Returns the position of the first found occurrence of a specified value in a string</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_lastindexof.asp">lastIndexOf(searchvalue,start)</a></td>
                    <td>Returns the position of the last found occurrence of a specified value 
	              in a string</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_match.asp">match(regexp)</a></td>
                    <td>Searches a string for a match against a regular expression, and returns 
	              the matches</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_repeat.asp">repeat(count)</a></td>
                    <td>Returns a new string with a specified number of copies of an existing string</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_replace.asp">replace(searchvalue,newvalue)</a></td>
                    <td>Searches a string for a specified value, or a regular expression, and 
	              returns a new string where the specified values are replaced</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_search.asp">search(searchvalue)</a></td>
                    <td>Searches a string for a specified value, or regular expression, and 
	              returns the position of the match</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_slice_string.asp">slice(start,end)</a></td>
                    <td>Extracts a part of a string and returns a new string</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_split.asp">split(separator,limit)</a></td>
                    <td>Splits a string into an array of substrings</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_startswith.asp">startsWith(searchvalue,start)</a></td>
                    <td>Checks whether a string begins with specified characters</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_substr.asp">substr(start,length)</a></td>
                    <td>Extracts the characters from a string, beginning at a specified start 
	              position, and through the specified number of character</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_substring.asp">substring(start,end)</a></td>
                    <td>Extracts the characters from a string, between two specified indices</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_tolocalelowercase.asp">toLocaleLowerCase()</a></td>
                    <td>Converts a string to lowercase letters, according to the host's locale</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_tolocaleuppercase.asp">toLocaleUpperCase()</a></td>
                    <td>Converts a string to uppercase letters, according to the host's locale</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_tolowercase.asp">toLowerCase()</a></td>
                    <td>Converts a string to lowercase letters</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_touppercase.asp">toUpperCase()</a></td>
                    <td>Converts a string to uppercase letters</td>
                  </tr><tr>
                    <td><a  target="W3Schools" href="http://www.w3schools.com/jsref/jsref_trim_string.asp">trim()</a></td>
                    <td>Removes whitespace from both ends of a string</td>
                  </tr>
              </tbody></table>
            </details>
          </details>
        </dd>
        
        <dt><b> Full Script </b></dt>
        <dd>
          <details>
            <summary>A full script is given the whole annotation graph, which it can traverse,
              process, and add annotations to.</summary>
            
            <p> The script is executed for each transcript, with a variable
              called <var>transcript</var> which stores the transcript's Annotation
              Graph. <var>transcript</var> can be traversed to inspect annotations, and can have
              annotations added to it (on this layer only), which will be saved back to
              LaBB-CAT&#39;s annotation store when the script completes. </p>
            
            <p> The <var>transcript</var> graph is populated with annotations from the layers
              that are referring to in script.</p>

            <p> If your script creates new annotations on a layer that doesn't exist yet,
              (e.g. by using <code><var>annotation</var>.createTag("layer", <var>label</var>)</code>),
              then the mentioned layer will be automatically created as an interval span
              layer. If you want another type of layer (e.g. a word tag layer), be sure
              to click the <q>New Layer</q> button, fill in the details that appear, and
              click the <q>Define Layer</q> button, to ensure the right type of layer is
              created. </p>

            <p> The script might look something like the following, which tags each word with its
              length:</p> 
            <pre>
<span style="color:#8b4513;">// for each turn in the transcript</span>
<span style="color:#800080;">for</span> each (turn <span style="color:#800080;">in</span> transcript.all(&quot;turns&quot;)) {
&nbsp; <span style="color:#800080;">if</span> (annotator.cancelling) <span style="color:#800080;">break</span>; <span style="color:#8b4513;">// cancelled by the user</span>
&nbsp; <span style="color:#8b4513;">// for each word</span>
&nbsp; <span style="color:#800080;">for</span> each (word <span style="color:#800080;">in</span> turn.all(&quot;word&quot;)) {
&nbsp;&nbsp;&nbsp; <span style="color:#8b4513;">// tag the word with it's length</span>
&nbsp;&nbsp;&nbsp; word.createTag("length", &quot;length: &quot; + word.label.length());
&nbsp;&nbsp;&nbsp; log("Tagged word: " + word.label);
&nbsp; } <span style="color:#8b4513;">// next word</span>
} <span style="color:#8b4513;">// next turn</span>
            </pre>

            <details>
              <summary> While <i>Label Edit</i> mode operates purely with JavaScript
                objects, <i>Full Script</i> mode operates on underlying Java objects. One
                effect of this is that, when operating on Strings (e.g. annotation
                labels), the Java (not JavaScript)
                <a target="Java"
                   href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html">
                  String API</a> is available. </summary> 
              
              <p> Java String operations include: </p>
              
              <table summary="Method Summary table, listing methods, and an explanation"><tr>
                  <td><code>char</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)">charAt</a></strong>(int&nbsp;index)</code>
	            <div>Returns the <code>char</code> value at the
	              specified index.</div>
                  </td>
                </tr><tr>
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo(java.lang.String)">compareTo</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;anotherString)</code>
	            <div>Compares two strings lexicographically.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareToIgnoreCase(java.lang.String)">compareToIgnoreCase</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;str)</code>
	            <div>Compares two strings lexicographically, ignoring case
	              differences.</div>
                  </td>
                </tr><tr>
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#concat(java.lang.String)">concat</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;str)</code>
	            <div>Concatenates the specified string to the end of this string.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains(java.lang.CharSequence)">contains</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;s)</code>
	            <div>Returns true if and only if this string contains the specified
	              sequence of char values.</div>
                  </td>
                </tr><tr>
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#endsWith(java.lang.String)">endsWith</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;suffix)</code>
	            <div>Tests if this string ends with the specified suffix.</div>
                  </td>
                </tr><tr>
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase(java.lang.String)">equalsIgnoreCase</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;anotherString)</code>
	            <div>Compares this <code>String</code> to another <code>String</code>, ignoring case
	              considerations.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)">indexOf</a></strong>(int&nbsp;ch)</code>
	            <div>Returns the index within this string of the first occurrence of
	              the specified character.</div>
                  </td>
                </tr><tr>
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int,%20int)">indexOf</a></strong>(int&nbsp;ch,
	              int&nbsp;fromIndex)</code>
	            <div>Returns the index within this string of the first occurrence of the
	              specified character, starting the search at the specified index.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(java.lang.String)">indexOf</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;str)</code>
	            <div>Returns the index within this string of the first occurrence of the
	              specified substring.</div>
                  </td>
                </tr><tr>
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(java.lang.String,%20int)">indexOf</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;str,
	              int&nbsp;fromIndex)</code>
	            <div>Returns the index within this string of the first occurrence of the
	              specified substring, starting at the specified index.</div>
                  </td>
                </tr><tr>
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#isEmpty()">isEmpty</a></strong>()</code>
	            <div>Returns <tt>true</tt> if, and only if, <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length()"><code>length()</code></a> is <tt>0</tt>.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf(int)">lastIndexOf</a></strong>(int&nbsp;ch)</code>
	            <div>Returns the index within this string of the last occurrence of
	              the specified character.</div>
                  </td>
                </tr><tr>
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf(int,%20int)">lastIndexOf</a></strong>(int&nbsp;ch,
                      int&nbsp;fromIndex)</code>
	            <div>Returns the index within this string of the last occurrence of
	              the specified character, searching backward starting at the
	              specified index.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf(java.lang.String)">lastIndexOf</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;str)</code>
	            <div>Returns the index within this string of the last occurrence of the
	              specified substring.</div>
                  </td>
                </tr><tr>
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf(java.lang.String,%20int)">lastIndexOf</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;str,
                      int&nbsp;fromIndex)</code>
	            <div>Returns the index within this string of the last occurrence of the
	              specified substring, searching backward starting at the specified index.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>int</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length()">length</a></strong>()</code>
	            <div>Returns the length of this string.</div>
                  </td>
                </tr><tr>
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches(java.lang.String)">matches</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;regex)</code>
	            <div>Tells whether or not this string matches the given <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/../util/regex/Pattern.html#sum">regular expression</a>.</div>
                  </td>
                </tr><tr>
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#regionMatches(boolean,%20int,%20java.lang.String,%20int,%20int)">regionMatches</a></strong>(boolean&nbsp;ignoreCase,
                      int&nbsp;toffset,
                      <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;other,
                      int&nbsp;ooffset,
                      int&nbsp;len)</code>
	            <div>Tests if two string regions are equal.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#regionMatches(int,%20java.lang.String,%20int,%20int)">regionMatches</a></strong>(int&nbsp;toffset,
                      <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;other,
                      int&nbsp;ooffset,
                      int&nbsp;len)</code>
	            <div>Tests if two string regions are equal.</div>
                  </td>
                </tr><tr>
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)">replace</a></strong>(char&nbsp;oldChar,
	              char&nbsp;newChar)</code>
	            <div>Returns a new string resulting from replacing all occurrences of
	              <code>oldChar</code> in this string with <code>newChar</code>.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence)">replace</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;target,
	              <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;replacement)</code>
	            <div>Replaces each substring of this string that matches the literal target
	              sequence with the specified literal replacement sequence.</div>
                  </td>
                </tr><tr>
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String)">replaceAll</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;regex,
                      <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;replacement)</code>
	            <div>Replaces each substring of this string that matches the given <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/../util/regex/Pattern.html#sum">regular expression</a> with the
	              given replacement.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst(java.lang.String,%20java.lang.String)">replaceFirst</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;regex,
                      <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;replacement)</code>
	            <div>Replaces the first substring of this string that matches the given <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/../util/regex/Pattern.html#sum">regular expression</a> with the
	              given replacement.</div>
                  </td>
                </tr><tr>
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>[]</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)">split</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;regex)</code>
	            <div>Splits this string around matches of the given <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/../util/regex/Pattern.html#sum">regular expression</a>.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>[]</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String,%20int)">split</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;regex,
	              int&nbsp;limit)</code>
	            <div>Splits this string around matches of the given
	              <a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/../util/regex/Pattern.html#sum">regular expression</a>.</div>
                  </td>
                </tr><tr>
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#startsWith(java.lang.String)">startsWith</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;prefix)</code>
	            <div>Tests if this string starts with the specified prefix.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code>boolean</code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#startsWith(java.lang.String,%20int)">startsWith</a></strong>(<a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a>&nbsp;prefix,
                      int&nbsp;toffset)</code>
	            <div>Tests if the substring of this string beginning at the
	              specified index starts with the specified prefix.</div> 
                  </td>
                </tr><tr class="rowColor">
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int)">substring</a></strong>(int&nbsp;beginIndex)</code>
	            <div>Returns a new string that is a substring of this string.</div>
                  </td>
                </tr><tr>
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)">substring</a></strong>(int&nbsp;beginIndex,
                      int&nbsp;endIndex)</code>
	            <div>Returns a new string that is a substring of this string.</div>
                  </td>
                </tr><tr>
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase()">toLowerCase</a></strong>()</code>
	            <div>Converts all of the characters in this <code>String</code> to lower
	              case using the rules of the default locale.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toUpperCase()">toUpperCase</a></strong>()</code>
	            <div>Converts all of the characters in this <code>String</code> to upper
	              case using the rules of the default locale.</div>
                  </td>
                </tr><tr class="rowColor">
                  <td><code><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" title="class in java.lang">String</a></code></td>
                  <td><code><strong><a target="Java" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim()">trim</a></strong>()</code>
	            <div>Returns a copy of the string, with leading and trailing whitespace
	              omitted.</div>
                  </td>
                </tr>
              </table>
            </details>

          </details>
        </dd> 
      </dl>
      

    </details>
    
    <hr>
    
    <form method="POST" action="setTaskParameters" id="form">

      <div id="labelMappingDiv">
        <span><label><input type="radio" name="labelMapping" id="labelMappingFalse" value="false">
            Full Script</label></span>
        <span><label><input type="radio" name="labelMapping" id="labelMappingTrue" value="true">
            Label Mapping</label></span>
      </div>

      <div id="labelMappingConfiguration">
        
        <div class="field" title="Input layer from which annotations are selected">
          <label for="sourceLayerId">Source Layer</label>
          <span>
            <select id="sourceLayerId" name="sourceLayerId"></select>
          </span>
        </div>
        
        <div class="field" title="Output layer on which new annotations are added">
          <label for="destinationLayerId">Destination Layer</label>
          <span>
            <select id="destinationLayerId" name="destinationLayerId">
              <option disabled value="">[select layer]</option> <!-- force choice the first time -->
              <option>[add new layer]</option>         <!-- allow adding a new layer -->
            </select>
          </span>
        </div>

        <div id="labelMappingSettings">
<pre>
<span style="color:#8b4513;">// for each <span class="sourceName">source annotation</span> in the transcript</span>
<span style="color:#800080;">for</span> each (var <span class="sourceVar">annotation</span> <span style="color:#800080;">in</span> transcript.all(&quot;<span class="sourceName">layer</span>&quot;)) {
&nbsp;&nbsp; <span style="color:#8b4513;">// tag the <span class="sourceName">annotation</span></span>
&nbsp;&nbsp; <span id="mappingLine"><span class="sourceVar">annotation</span>.createTag("<span class="destinationName">annotation</span>", <span class="sourceVar">annotation</span>.label.<textarea id="labelScript" title="Expression to execute on the source annotation label - e.g. length"></textarea>);</span>
} <span style="color:#8b4513;">// next source annotation</span>
</pre>
        </div>
        
        <div class="field language-field" title="Transcript attribute for overall language">
          <label for="transcriptLanguageLayerId">Transcript Language Attribute</label>
          <span>
            <select id="transcriptLanguageLayerId" name="transcriptLanguageLayerId">
              <option value="">[none]</option>
            </select>
          </span>
        </div>
        <div class="field language-field"
             title="Layer annotating phrases in a different language">
          <label for="phraseLanguageLayerId">Phrase Language Layer</label>
          <span>
            <select id="phraseLanguageLayerId" name="phraseLanguageLayerId">
              <option value="">[none]</option>
            </select>
          </span>
        </div>
        <div class="field language-field"
             id="languageField"
             title="Regular expression for the ISO language codes of the languages to target, or blank for all">
          <label for="language">Language</label>
          <span><input id="language" name="language" type="text" placeholder="Language"></span>
        </div>
        
      </div><!-- labelMappingConfiguration -->
      
      <div id="scriptConfiguration">
        <div id="loadControls">
          <label> Load script from file <input id="loadLocalScript" type="file"></label>
        </div>
        <div id="saveControls">
          <button class="form_button" id="saveLocalScript">Save script to file</button> 
        </div>
        <div id="newLayer">
          <button id="newLayerButton"
                  title="Create a new annotation layer for output"> New Layer </button>
          <div id="addingLayer" style="display: none;">
            <label>New Layer Name:
              <input id="newLayerId" type="text" title="ID for the new output layer"></label>
            <label>Type:
              <select id="newLayerParentId" title="What kind of layer is it?">
                <option id="rootParent">Span Layer</option>
                <option id="turnParent">Phrase Layer</option>
                <option id="wordParent">Word Layer</option>
              </select>
            </label>
            <label>Alignment:
              <select id="newLayerAlignment"
                      title="Does the layer mark out intervals or instants?">
                <option value="0" id="newLayerAlignment0">Not aligned</option>
                <option value="1">Points</option>
                <option value="2">Intervals</option>
              </select>
            </label>
          <button id="addLayerButton" title="Define the new layer"> Define Layer </button>
          </div><!--addingLayer-->
        </div><!--newLayer-->
        <div id="scriptDiv">
          <fieldset><legend> Script </legend>
            <textarea name="script" id="script"></textarea>
          </fieldset>
        </div><!-- scriptDiv -->
      </div><!--scriptConfiguration-->

      <div class="controls"><input type="submit" value="Set Parameters"></div>
    </form>
    
    <footer><div> Javascript Annotator <small id="version"></small> </div></footer>
    <script src="codemirror.js" type="text/javascript"></script>
    <script src="javascript.js" type="text/javascript"></script>
    <script src="index.js" type="text/javascript"></script>
  </body>
</html>
