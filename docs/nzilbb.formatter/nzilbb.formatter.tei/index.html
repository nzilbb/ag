<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/index.md at 2025-06-02
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Deserializer for TEI P5 XML files. – nzilbb.formatter.tei</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.1.0.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="https://nzilbb.github.io/ag/"><img src="https://nzilbb.github.io/ag/images/labbcat.png" /> nzilbb.formatter.tei</a></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="https://www.canterbury.ac.nz/nzilbb/"><img src="https://nzilbb.github.io/ag/images/nzilbb.svg" /></a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-06-02<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.6.1<span class="divider">|</span></li>
      <li><a href="../../index.html">Annotation Graphs</a><span class="divider">/</span></li>
      <li><a href="../index.html">Formatters</a><span class="divider">/</span></li>
    <li class="active">Deserializer for TEI P5 XML files.</li>
        <li class="pull-right"><span class="divider">|</span>
<a href="http://dx.doi.org/10.1016/j.csl.2017.01.004">Fromont (2017)</a></li>
        <li class="pull-right"><span class="divider">|</span>
<a href="https://labbcat.canterbury.ac.nz/">LaBB-CAT</a></li>
        <li class="pull-right"><a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">nzilbb.formatter.tei</li>
    <li><a href="https://raw.githubusercontent.com/nzilbb/ag/refs/heads/main/bin/nzilbb.formatter.tei.jar">Download</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Deserializer_for_TEI_P5_XML_files."></a>
<h1>Deserializer for TEI P5 XML files.</h1>
<p>TEI tag support is basic at this stage, and many tags are not explicitly interpreted, but most can be mapped to arbitrary annotation layers.</p><section><a id="The_TEI_header_and_Meta-data"></a>
<h2>The TEI header and Meta-data</h2>
<p>Certain constructions in the <code>&lt;teiHeader&gt;</code> section of a TEI file are recognised:</p>
<ul>

<li>in the <code>&lt;fileDesc&gt;</code> subsection:
<ul>

<li>the text in <code>&lt;titleStmt&gt;&lt;title&gt;</code>&#x2026;
is taken to be the value of the &#x201c;title&#x201d; transcript attribute</li>
<li>the text in <code>&lt;titleStmt&gt;&lt;respStmt&gt;&lt;name&gt;</code>&#x2026;
is taken to be the value of the &#x201c;scribe&#x201d; transcript attribute
(i.e. the name of the transcriber)</li>
<li>the text in <code>&lt;publicationStmt&gt;&lt;distributor&gt;</code>&#x2026;
is taken to be the value of the &#x201c;distributor&#x201d; transcript attribute</li>
<li>the text in <code>&lt;publicationStmt&gt;&lt;publisher&gt;</code>&#x2026;
is taken to be the value of the &#x201c;publisher&#x201d; transcript attribute</li>
<li>the text in <code>&lt;publicationStmt&gt;&lt;availability&gt;&lt;p&gt;</code>&#x2026;
is taken to be the value of the &#x201c;availability&#x201d; transcript attribute</li>
<li>the text in <code>&lt;publicationStmt&gt;&lt;date&gt;</code>&#x2026;
is taken to be the value of the &#x201c;date&#x201d; or &#x201c;air_date&#x201d; transcript attribute</li>
<li>the text in <code>&lt;publicationStmt&gt;&lt;distributor&gt;</code>&#x2026;
is taken to be the value of the &#x201c;distributor&#x201d; transcript attribute</li>
<li>the text in
<code>&lt;sourceDesc&gt;&lt;bibleStruct&gt;&lt;monogr&gt;&lt;author&gt;</code>&#x2026;
is taken to be the value of the &#x201c;author&#x201d; transcript attribute
(who is created as the sole &#x2018;participant&#x2019; of the transcript)</li>
<li>alternatively the text in
<code>&lt;sourceDesc&gt;&lt;titleStmt&gt;&lt;author&gt;</code>&#x2026;
is taken to be the value of the &#x201c;author&#x201d; transcript attribute
(who is created as the sole &#x2018;participant&#x2019; of the transcript)</li>
<li>the text in
<code>&lt;sourceDesc&gt;&lt;bibl&gt;&lt;publisher&gt;</code>&#x2026;
is taken to be the name of the author of the text (who is created as the
sole &#x2018;participant&#x2019; of the transcript)</li>
</ul></li>
<li>in the <code>&lt;profileDesc&gt;</code> subsection:
<ul>

<li>the text in <code>&lt;creation&gt;&lt;date&gt;</code>&#x2026;
is taken to be the value of the &#x201c;creation_date&#x201d; transcript attribute</li>
<li>the value of the <code>&lt;langUsage&gt;&lt;language ident=&quot;</code>&#x2026;<code>&quot;&gt;</code>
attribute is taken to be the value of the &#x201c;language&#x201d; transcript attribute</li>
<li>when <code>&lt;creation&gt;&lt;place&gt;&lt;placeName placeName='nnn'&gt;&lt;country&gt;</code>ccc<code>&lt;/country&gt;&lt;ppp&lt;/placeName&gt;</code>
exists, <var>nnn</var> can be mapped to a transcript attribute called something like
&#x201c;place&#x201d;. If the <code>placeName</code> attribute is absent, then <var>ppp</var> is
used.</li>
<li>the <code>&lt;particDesc&gt;&lt;person``&gt;</code> tags
are taken to be participants, whose <code>&lt;idno&gt;</code> tag specifies the
participant's identifier, and whose other tags specify the participant's attributes
named after the tag name (or optionally are added as transcript attributes).
The content of the <code>&lt;person&gt;</code> tag's <code>&lt;age&gt;</code> tag
is converted to a single number (in years) if the text is formatted
as <code>y;m.d</code>
or as <code>y years m months d days</code></li>
<li>the <code>&lt;particDesc&gt;&lt;person&gt;&lt;persName&gt;</code> tags
with a &#x201c;role&#x201d; attribute can be mapped to a transcript attribute, by the value of
the attribute. For example if <code>role=&quot;Recipient&quot;</code> then a &#x201c;recipient&#x201d;
transcript attribute can receive the tag content.<br />
Additionally, if the <code>&lt;persName&gt;</code> has a <code>gender</code> attribute,
the value can be mapped to a transcript attribute for gender.</li>
</ul></li>
<li>in the <code>&lt;revisionDesc&gt;</code> subsection:
<ul>

<li>the text in <code>&lt;change&gt;&lt;date&gt;</code>&#x2026;
is taken to be the value of the &#x201c;version_date&#x201d; transcript attribute</li>
<li>the text in <code>&lt;change&gt;&lt;respStmt&gt;&lt;name&gt;</code>&#x2026;
is taken to be the value of the &#x201c;scribe&#x201d; transcript attribute</li>
</ul></li>
</ul>
<p>Arbitrary transcript/document attributes are implemented by including a <code>&lt;notesStmt&gt;</code>
within the <code>&lt;fileDesc&gt;</code> header, containing one <code>&lt;note&gt;</code> tag per attribute, and using the
<code>type</code> attribute as the attribute key and the tag content as the value - e.g.</p>

<pre><code class="nohighlight nocode">&lt;notesStmt&gt;
  &lt;note type=&quot;subreddit&quot;&gt;StrangerThings&lt;/note&gt;
  &lt;note type=&quot;parent_id&quot;&gt;t1_dd5f8en&lt;/note&gt;
&lt;/notesStmt&gt;
</code></pre>
<p>Participant/speaker attributes can be included in the <code>&lt;person&gt;</code> tag, as per the TEI
specification.</p>
<p>Arbitrary participant/speaker attributes (i.e. custom attributes or others not foreseen by
the TEI specification) can be processed by including one <code>&lt;note&gt;</code> tag per attribute within
each participant's <code>&lt;person&gt;</code> tag, and using the
<code>type</code> attribute as the attribute key and the tag content as the value - e.g.\</p>

<pre><code class="nohighlight nocode">&lt;person&gt;
   &lt;idno&gt;ABCD&lt;/idno&gt;
   &lt;age&gt;46&lt;/age&gt;
   &lt;education&gt;Secondary&lt;/education&gt;
   &lt;note type=&quot;first language&quot;&gt;English&lt;/note&gt;
   &lt;note type=&quot;origin&quot;&gt;Liverpool&lt;/note&gt;
&lt;/person&gt;
</code></pre></section><section><a id="Tags_in_the_text"></a>
<h2>Tags in the text</h2>
<p>The P5 guidelines for TEI specify a dazzling array of tags for capturing all kinds
of information about texts, only a subset of which will work well with this
formatter. There is explicit support for the following TEI tags:</p>
<ul>

<li><code>&lt;p&gt;</code>, <code>&lt;div&gt;</code>, and <code>&lt;ab&gt;</code>
are interpreted as starting a new line</li>
<li><code>&lt;w&gt;</code> tags (for marking up words) are used for word tokenization
if they are present (if they are absent, standard whitespace-based tokenization is used).
Attributes of the <code>&lt;w&gt;</code> tag like <code>lemma</code> or <code>type</code>
can be mapped to word layers for capturing such tagging in the text.</li>
<li>the <code>&lt;choice&gt;&lt;orig&gt;</code>&#x2026;<code>&lt;/orig&gt;&lt;reg&gt;</code>&#x2026;<code>&lt;/reg&gt;&lt;/choice&gt;</code>
construction for marking regularization of text is recognized, and the contents of the
<code>&lt;reg&gt;</code>&#x2026;<code>&lt;/reg&gt;</code> tag can be extracted to the
&#x201c;lexical&#x201d; layer (for single-word regularization) or a selected &#x2018;meta&#x2019; layer
(if multi-word regularization is used).</li>
<li><code>&lt;foreign&gt;</code> is recognised as marking sections of the transcript as being
in another language, and so its contents are annotated on the &#x201c;language&#x201d; layer,
using value of the the <code>xml:lang</code> attribute as the annotation label.</li>
<li><code>&lt;note&gt;</code> is recognised as a commentary marker, and so its contents
are put on to the &#x201c;comment&#x201d; layer instead of being inserted into the transcript text.</li>
<li><code>&lt;unclear&gt;</code> tags can create annotations on a selected layer, and
the <code>reason</code> and <code>cert</code> attributes recognised and used in
the resulting annotation label if present.</li>
<li>the <code>&lt;placeName placeName='nnn'&gt;&lt;country&gt;</code>ccc<code>&lt;/country&gt;&lt;ppp&lt;/placeName&gt;</code>
construction is recognized as tagging the name of a place <em>ppp</em> with
annotations for the correct place name <em>nnn</em> and country <em>ccc</em> - i.e.
<em>ppp</em> is part of the text, but <em>nnn</em> and <em>ccc</em> aren't.</li>
<li>&#x2026;but the <code>&lt;country&gt;</code>ccc<code>&lt;/country&gt;</code> tag alone
is assumed to be annotating part of the text - i.e. <em>ccc</em> is left in the
text rather than being stripped out as it is when inside
<code>&lt;placeName&gt;</code>&#x2026;<code>&lt;/placeName&gt;</code>.</li>
<li><code>&lt;hi rend='rrr'&gt;</code>&#x2026;<code>&lt;/hi&gt;</code> results in an annotation
with label <em>rrr</em>.</li>
</ul>
<p>Other tags are by default mapped on to the &#x201c;entities&#x201d; layer (in which case their tag
name,and its type attribute if present, will be used for the entity label).
Alternatively, if there is a layer that is named after the TEI tag name, then tags will
be mapped to that layer by default during upload. For example, to have all <code>&lt;sic&gt;</code>
tags extracted to their own layer (instead of the &#x201c;entities&#x201d; layer) by default, create
a new &#x2018;phrase&#x2019; layer called &#x201c;sic&#x201d;.</p>
<p>This deserializer supports part of the
<a href="http://jtei.revues.org/476" class="externalLink">schema for Representation of Computer-mediated Communication</a>
proposed by Michael Bei&#xdf;wenger, Maria Ermakova, Alexander Geyken, Lothar Lemnitzer,
and Angelika Storrer (2012), with the exception of the following:</p>
<ul>

<li>When <code>&lt;posting&gt;</code> tags are sychronised to a <code>&lt;when&gt;</code> tag inside a <code>&lt;timeline&gt;</code>, the time synchronisation is ignored.</li>
<li>The <code>&lt;addressingTerm&gt;</code>, <code>&lt;addressMarker&gt;</code> and <code>&lt;addressee&gt;</code> tags supported, and mapped to &#x201c;entities&#x201d; layer by default, but the <code>who</code> attribute of <code>&lt;addressee&gt;</code> is ignored.</li>
<li>The <code>type</code> attribute of the <code>&lt;div&gt;</code> tag is ignored.</li>
<li>The <code>revisedWhen</code>, <code>revisedBy</code>, and <code>indentLevel</code> attributes of the <code>&lt;posting&gt;</code> tag are ignored</li>
<li>The <code>&lt;interactionTerm&gt;</code> tag is ignored.</li>
<li>The <code>&lt;interactionTemplate&gt;</code>, <code>&lt;interactionWord&gt;</code>, and <code>&lt;emoticon&gt;</code> tags are not explicitly supported.</li>
<li>The <code>&lt;autoSignature&gt;</code> and <code>&lt;signatureContent&gt;</code> tags are not explicitly supported.</li>
</ul></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<a rel='license' href='http://creativecommons.org/licenses/by-sa/2.0/'><img alt='CC-BY-SA Creative Commons Licence ' src='/ag/images/cc-by-sa.svg' title='This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License' /></a><a rel='author' href='https://www.canterbury.ac.nz/nzilbb/'><img src='/ag/images/nzilbb.svg' alt='Te Kāhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour' title='🄯 NZILBB'></a>
        </div>
      </div>
    </footer>
  </body>
</html>
