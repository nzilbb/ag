<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.8) on Fri Oct 09 19:59:28 UYT 2020 -->
<title>Merger (nzilbb.ag)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-10-09">
<link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Merger (nzilbb.ag)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">nzilbb.ag.util</a></div>
<h2 title="Class Merger" class="title">Class Merger</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>Merger</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>Function&lt;<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>,&#8203;<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&gt;</code>, <code>UnaryOperator&lt;<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&gt;</code>, <code><a href="../GraphTransformer.html" title="interface in nzilbb.ag">GraphTransformer</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">Merger</span>
extends Object
implements <a href="../GraphTransformer.html" title="interface in nzilbb.ag">GraphTransformer</a></pre>
<div class="block">Merges an editer version of a graph into the original version of that graph.
 <p>The merger assumes that <a href="#editedGraph"><code>editedGraph</code></a> and the <var>graph</var> passed to
 <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a> really are versions of the same graph. <a href="#editedGraph"><code>editedGraph</code></a> needn't
 contain all the layers that <var>graph</var> does, but it must have a valid layer hierarchy;
 e.g. if it's a fragment representing an utterance, it must nevertheless have (possibly
 reconstructed) turn and participant annotations to link the utterance to the graph itself (if
 <var>graph</var> does). For more detailed assumption information, see <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.
 <p>TODO handle graphs with null offset anchors.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Robert Fromont robert@fromont.net.nz</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">Merger</a></span>()</code></th>
<td class="colLast">
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(nzilbb.ag.Graph)">Merger</a></span>&#8203;(<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;editedGraph)</code></th>
<td class="colLast">
<div class="block">Constructor with edited graph.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeEndWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor)">changeEndWithRelatedAnnotations</a></span>&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                               <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newEndAnchor)</code></th>
<td class="colLast">
<div class="block">Sets the End Anchor of the given annotation, and also the end anchors of related annotations
 that end in the same place.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeEndWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.lang.String)">changeEndWithRelatedAnnotations</a></span>&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                               <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newEndAnchor,
                               String&nbsp;layerIdToExclude)</code></th>
<td class="colLast">
<div class="block">Sets the End Anchor of the given annotation, and also the end anchors of related annotations
 that end in the same place.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeEndWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.util.Set)">changeEndWithRelatedAnnotations</a></span>&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                               <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newEndAnchor,
                               Set&lt;String&gt;&nbsp;layerIdsToExclude)</code></th>
<td class="colLast">
<div class="block">Sets the End Anchor of the given annotation, and also the end anchors of related annotations
 that end in the same place.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeStartWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor)">changeStartWithRelatedAnnotations</a></span>&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                 <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newStartAnchor)</code></th>
<td class="colLast">
<div class="block">Sets the Start Anchor of the given annotation, and also the start anchors of related
 annotations that start in the same place.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeStartWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.lang.String)">changeStartWithRelatedAnnotations</a></span>&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                 <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newStartAnchor,
                                 String&nbsp;layerIdToExclude)</code></th>
<td class="colLast">
<div class="block">Sets the Start Anchor of the given annotation, and also the start anchors of related
 annotations that start in the same place.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeStartWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.util.Set)">changeStartWithRelatedAnnotations</a></span>&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                 <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newStartAnchor,
                                 Set&lt;String&gt;&nbsp;layerIdsToExclude)</code></th>
<td class="colLast">
<div class="block">Sets the StartAnchor of the given annotation, and also the start anchors of related
 annotations that start in the same place.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getArraySizeLimit()">getArraySizeLimit</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#arraySizeLimit"><code>arraySizeLimit</code></a>: The maximum length of a list used for mapping
 annotations of the same layer but in different graphs to each other.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDebug()">getDebug</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#debug"><code>debug</code></a>: Whether a log of messages should be kept for reporting.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../Graph.html" title="class in nzilbb.ag">Graph</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEditedGraph()">getEditedGraph</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#editedGraph"><code>editedGraph</code></a>: The edited version of the graph.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>Vector&lt;String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getErrors()">getErrors</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#errors"><code>errors</code></a>: Fatal errors raised during the last <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIgnoreLabelConfidence()">getIgnoreLabelConfidence</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#ignoreLabelConfidence"><code>ignoreLabelConfidence</code></a>: Whether to ignore label confidence and force
 label changes (true), or only change labels when the edited confidence is equal to or higher
 than the original confidence.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIgnoreOffsetConfidence()">getIgnoreOffsetConfidence</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#ignoreOffsetConfidence"><code>ignoreOffsetConfidence</code></a>: Wether to ignore offset confidence and force
 offset changes (true), or only change offsets when the edited offset is equal to or higher
 than the original confidence (false).</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>Vector&lt;String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLog()">getLog</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#log"><code>log</code></a>: Messages for debugging.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>HashSet&lt;String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNoChangeLayers()">getNoChangeLayers</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#noChangeLayers"><code>noChangeLayers</code></a>: Set of IDs of layers for which annotations may not be added, changed, or deleted.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSmidgin()">getSmidgin</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#smidgin"><code>smidgin</code></a>: Initial duration of early/layer children, out of order
 annotations, etc.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="Validator.html" title="class in nzilbb.ag.util">Validator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getValidator()">getValidator</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#validator"><code>validator</code></a>: The validator to use after merge is complete, or null to not
 validate the graph after merge.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mapAnnotationsForMerge(nzilbb.ag.Layer,java.util.SortedSet,java.util.SortedSet)">mapAnnotationsForMerge</a></span>&#8203;(<a href="../Layer.html" title="class in nzilbb.ag">Layer</a>&nbsp;layer,
                      SortedSet&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;these,
                      SortedSet&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;those)</code></th>
<td class="colLast">
<div class="block">PHASE 1: Maps annotations from another fragment to annotations in this fragment, in order to
 then compute change deltas.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>Vector&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeDeleted(java.util.Collection)">removeDeleted</a></span>&#8203;(Collection&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;collection)</code></th>
<td class="colLast">
<div class="block">Removes elements from the collection that are marked for deletion.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeLeadingMappedAnnotations(java.util.Vector)">removeLeadingMappedAnnotations</a></span>&#8203;(Vector&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;annotations)</code></th>
<td class="colLast">
<div class="block">Removes leading annotations from the list, up to and including the last mapped annotation
 (i.e.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setArraySizeLimit(int)">setArraySizeLimit</a></span>&#8203;(int&nbsp;newArraySizeLimit)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#arraySizeLimit"><code>arraySizeLimit</code></a>: The maximum length of a list used for mapping
 annotations of the same layer but in different graphs to each other.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setDebug(boolean)">setDebug</a></span>&#8203;(boolean&nbsp;newDebug)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#debug"><code>debug</code></a>: Whether a log of messages should be kept for reporting.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setEditedGraph(nzilbb.ag.Graph)">setEditedGraph</a></span>&#8203;(<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;newEditedGraph)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#editedGraph"><code>editedGraph</code></a>: The edited version of the graph.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setErrors(java.util.Vector)">setErrors</a></span>&#8203;(Vector&lt;String&gt;&nbsp;newErrors)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#errors"><code>errors</code></a>: Fatal errors raised during the last <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setIgnoreLabelConfidence(boolean)">setIgnoreLabelConfidence</a></span>&#8203;(boolean&nbsp;newIgnoreLabelConfidence)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#ignoreLabelConfidence"><code>ignoreLabelConfidence</code></a>: Whether to ignore label confidence and force
 label changes (true), or only change labels when the edited confidence is equal to or higher
 than the original confidence.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setIgnoreOffsetConfidence(boolean)">setIgnoreOffsetConfidence</a></span>&#8203;(boolean&nbsp;newIgnoreOffsetConfidence)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#ignoreOffsetConfidence"><code>ignoreOffsetConfidence</code></a>: Wether to ignore offset confidence and force
 offset changes (true), or only change offsets when the edited offset is equal to or higher
 than the original confidence (false).</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setSmidgin(double)">setSmidgin</a></span>&#8203;(double&nbsp;newSmidgin)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#smidgin"><code>smidgin</code></a>: Initial duration of early/layer children, out of order annotations, etc.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="Merger.html" title="class in nzilbb.ag.util">Merger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setValidator(nzilbb.ag.util.Validator)">setValidator</a></span>&#8203;(<a href="Validator.html" title="class in nzilbb.ag.util">Validator</a>&nbsp;newValidator)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#validator"><code>validator</code></a>: The validator to use after merge is complete, or null to not
 validate the graph after merge.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="../Graph.html" title="class in nzilbb.ag">Graph</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transform(nzilbb.ag.Graph)">transform</a></span>&#8203;(<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;graph)</code></th>
<td class="colLast">
<div class="block">Merges <a href="#editedGraph"><code>editedGraph</code></a> into the given graph.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.Function">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;Function</h3>
<code>andThen, compose</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.GraphTransformer">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;<a href="../GraphTransformer.html" title="interface in nzilbb.ag">GraphTransformer</a></h3>
<code><a href="../GraphTransformer.html#apply(nzilbb.ag.Graph)">apply</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Merger</h4>
<pre>public&nbsp;Merger()</pre>
<div class="block">Default constructor.</div>
</li>
</ul>
<a id="&lt;init&gt;(nzilbb.ag.Graph)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Merger</h4>
<pre>public&nbsp;Merger&#8203;(<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;editedGraph)</pre>
<div class="block">Constructor with edited graph.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>editedGraph</code> - The edited version of the graph.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getErrors()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getErrors</h4>
<pre class="methodSignature">public&nbsp;Vector&lt;String&gt;&nbsp;getErrors()</pre>
<div class="block">Getter for <a href="#errors"><code>errors</code></a>: Fatal errors raised during the last <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Fatal errors raised during the last <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.</dd>
</dl>
</li>
</ul>
<a id="setErrors(java.util.Vector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setErrors</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setErrors&#8203;(Vector&lt;String&gt;&nbsp;newErrors)</pre>
<div class="block">Setter for <a href="#errors"><code>errors</code></a>: Fatal errors raised during the last <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newErrors</code> - Fatal errors raised during the last <a href="#transform(nzilbb.ag.Graph)"><code>transform(Graph)</code></a>.</dd>
</dl>
</li>
</ul>
<a id="getDebug()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDebug</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;getDebug()</pre>
<div class="block">Getter for <a href="#debug"><code>debug</code></a>: Whether a log of messages should be kept for reporting.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether a log of messages should be kept for reporting.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getLog()"><code>getLog()</code></a>, 
<a href="#log(java.lang.Object...)"><code>log(Object...)</code></a></dd>
</dl>
</li>
</ul>
<a id="setDebug(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setDebug&#8203;(boolean&nbsp;newDebug)</pre>
<div class="block">Setter for <a href="#debug"><code>debug</code></a>: Whether a log of messages should be kept for reporting.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newDebug</code> - Whether a log of messages should be kept for reporting.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getLog()"><code>getLog()</code></a>, 
<a href="#log(java.lang.Object...)"><code>log(Object...)</code></a></dd>
</dl>
</li>
</ul>
<a id="getLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLog</h4>
<pre class="methodSignature">public&nbsp;Vector&lt;String&gt;&nbsp;getLog()</pre>
<div class="block">Getter for <a href="#log"><code>log</code></a>: Messages for debugging.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Messages for debugging.</dd>
</dl>
</li>
</ul>
<a id="getEditedGraph()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEditedGraph</h4>
<pre class="methodSignature">public&nbsp;<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;getEditedGraph()</pre>
<div class="block">Getter for <a href="#editedGraph"><code>editedGraph</code></a>: The edited version of the graph.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The edited version of the graph.</dd>
</dl>
</li>
</ul>
<a id="setEditedGraph(nzilbb.ag.Graph)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEditedGraph</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setEditedGraph&#8203;(<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;newEditedGraph)</pre>
<div class="block">Setter for <a href="#editedGraph"><code>editedGraph</code></a>: The edited version of the graph.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newEditedGraph</code> - The edited version of the graph.</dd>
</dl>
</li>
</ul>
<a id="getArraySizeLimit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getArraySizeLimit</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getArraySizeLimit()</pre>
<div class="block">Getter for <a href="#arraySizeLimit"><code>arraySizeLimit</code></a>: The maximum length of a list used for mapping
 annotations of the same layer but in different graphs to each other. 
 <p>Default is 500. A value of 0 means don't used overlapping chunks.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The maximum length of a list used for mapping annotations of the same layer but in
 different graphs to each other.</dd>
</dl>
</li>
</ul>
<a id="setArraySizeLimit(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setArraySizeLimit</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setArraySizeLimit&#8203;(int&nbsp;newArraySizeLimit)</pre>
<div class="block">Setter for <a href="#arraySizeLimit"><code>arraySizeLimit</code></a>: The maximum length of a list used for mapping
 annotations of the same layer but in different graphs to each other.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newArraySizeLimit</code> - The maximum length of a list used for mapping annotations of the
 same layer but in different graphs to each other. A value of 0 means don't used overlapping
 chunks.</dd>
</dl>
</li>
</ul>
<a id="getSmidgin()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSmidgin</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getSmidgin()</pre>
<div class="block">Getter for <a href="#smidgin"><code>smidgin</code></a>: Initial duration of early/layer children, out of order
 annotations, etc.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Initial duration of early/layer children, out of order annotations, etc.</dd>
</dl>
</li>
</ul>
<a id="setSmidgin(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSmidgin</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setSmidgin&#8203;(double&nbsp;newSmidgin)</pre>
<div class="block">Setter for <a href="#smidgin"><code>smidgin</code></a>: Initial duration of early/layer children, out of order annotations, etc.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newSmidgin</code> - Initial duration of early/layer children, out of order annotations, etc.</dd>
</dl>
</li>
</ul>
<a id="getIgnoreLabelConfidence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIgnoreLabelConfidence</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;getIgnoreLabelConfidence()</pre>
<div class="block">Getter for <a href="#ignoreLabelConfidence"><code>ignoreLabelConfidence</code></a>: Whether to ignore label confidence and force
 label changes (true), or only change labels when the edited confidence is equal to or higher
 than the original confidence.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether to ignore label confidence and force label changes (true), or only change
 labels when the edited confidence is equal to or higher than the original
 confidence. Default is false.</dd>
</dl>
</li>
</ul>
<a id="setIgnoreLabelConfidence(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIgnoreLabelConfidence</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setIgnoreLabelConfidence&#8203;(boolean&nbsp;newIgnoreLabelConfidence)</pre>
<div class="block">Setter for <a href="#ignoreLabelConfidence"><code>ignoreLabelConfidence</code></a>: Whether to ignore label confidence and force
 label changes (true), or only change labels when the edited confidence is equal to or higher
 than the original confidence.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newIgnoreLabelConfidence</code> - Whether to ignore label confidence and force label changes
 (true), or only change labels when the edited confidence is equal to or higher than the
 original confidence.</dd>
</dl>
</li>
</ul>
<a id="getIgnoreOffsetConfidence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIgnoreOffsetConfidence</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;getIgnoreOffsetConfidence()</pre>
<div class="block">Getter for <a href="#ignoreOffsetConfidence"><code>ignoreOffsetConfidence</code></a>: Wether to ignore offset confidence and force
 offset changes (true), or only change offsets when the edited offset is equal to or higher
 than the original confidence (false).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Wether to ignore offset confidence and force offset changes (true), or only change
 offsets when the edited offset is equal to or higher than the original confidence (false).
 The default is false.</dd>
</dl>
</li>
</ul>
<a id="setIgnoreOffsetConfidence(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIgnoreOffsetConfidence</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setIgnoreOffsetConfidence&#8203;(boolean&nbsp;newIgnoreOffsetConfidence)</pre>
<div class="block">Setter for <a href="#ignoreOffsetConfidence"><code>ignoreOffsetConfidence</code></a>: Wether to ignore offset confidence and force
 offset changes (true), or only change offsets when the edited offset is equal to or higher
 than the original confidence (false).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newIgnoreOffsetConfidence</code> - Wether to ignore offset confidence and force offset changes
 (true), or only change offsets when the edited offset is equal to or higher than the
 original confidence (false).</dd>
</dl>
</li>
</ul>
<a id="getNoChangeLayers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNoChangeLayers</h4>
<pre class="methodSignature">public&nbsp;HashSet&lt;String&gt;&nbsp;getNoChangeLayers()</pre>
<div class="block">Getter for <a href="#noChangeLayers"><code>noChangeLayers</code></a>: Set of IDs of layers for which annotations may not be added, changed, or deleted.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Set of IDs of layers for which annotations may not be added, changed, or deleted.</dd>
</dl>
</li>
</ul>
<a id="getValidator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getValidator</h4>
<pre class="methodSignature">public&nbsp;<a href="Validator.html" title="class in nzilbb.ag.util">Validator</a>&nbsp;getValidator()</pre>
<div class="block">Getter for <a href="#validator"><code>validator</code></a>: The validator to use after merge is complete, or null to not
 validate the graph after merge.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The validator to use after merge is complete, or null to not validate the graph
 after merge. Default value is a <a href="Validator.html" title="class in nzilbb.ag.util"><code>Validator</code></a> created with its default constructor.</dd>
</dl>
</li>
</ul>
<a id="setValidator(nzilbb.ag.util.Validator)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setValidator</h4>
<pre class="methodSignature">public&nbsp;<a href="Merger.html" title="class in nzilbb.ag.util">Merger</a>&nbsp;setValidator&#8203;(<a href="Validator.html" title="class in nzilbb.ag.util">Validator</a>&nbsp;newValidator)</pre>
<div class="block">Setter for <a href="#validator"><code>validator</code></a>: The validator to use after merge is complete, or null to not
 validate the graph after merge.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newValidator</code> - The validator to use after merge is complete, or null to not validate
 the graph after merge.</dd>
</dl>
</li>
</ul>
<a id="transform(nzilbb.ag.Graph)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transform</h4>
<pre class="methodSignature">public&nbsp;<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;transform&#8203;(<a href="../Graph.html" title="class in nzilbb.ag">Graph</a>&nbsp;graph)
                throws <a href="../TransformationException.html" title="class in nzilbb.ag">TransformationException</a></pre>
<div class="block">Merges <a href="#editedGraph"><code>editedGraph</code></a> into the given graph.  
 The changes are detected and applied to the <var>graph</var>, and returned in a vector of 
 <a href="../Change.html" title="class in nzilbb.ag"><code>Change</code></a> objects.
 <p>Assumptions:
 <ul>
  <li><var>editedGraph</var> represents a possibly partial 
   (i.e. with a subset of layers) version <var>graph</var> with some changes applied to it.</li>
  <li><a href="#editedGraph"><code>editedGraph</code></a> is valid and has a valid layer hierarchy (e.g. no orphaned utterances)
   - e.g. that <a href="Validator.html" title="class in nzilbb.ag.util"><code>Validator</code></a> has been applied to it before merging.</li>
  <li><a href="#editedGraph"><code>editedGraph</code></a> has no proposed changes (i.e. <a href="../Graph.html#commit()"><code>Graph.commit()</code></a> has been called)</li>
  <li>Participants are identified in both graphs using turn annotation labels,
   and this is done using the same annotation labels.</li>
 </ul>
 The IDs of Anchors and Annotations in <var>editedGraph</var> are not assumed to correspond
 to IDs in <var>graph</var>. Only changes of equal or higher condifence
 will be applied, so that automatic changes do not override prior manual ones.
 Once merging is finished, <var>graph</var> may be in an invalid state, and should be made 
 valid using <a href="Validator.html" title="class in nzilbb.ag.util"><code>Validator</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../GraphTransformer.html#transform(nzilbb.ag.Graph)">transform</a></code>&nbsp;in interface&nbsp;<code><a href="../GraphTransformer.html" title="interface in nzilbb.ag">GraphTransformer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graph</code> - The graph to merge changes into.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The changes introduced by the tranformation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../TransformationException.html" title="class in nzilbb.ag">TransformationException</a></code> - If the transformation cannot be completed.</dd>
</dl>
</li>
</ul>
<a id="mapAnnotationsForMerge(nzilbb.ag.Layer,java.util.SortedSet,java.util.SortedSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapAnnotationsForMerge</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;mapAnnotationsForMerge&#8203;(<a href="../Layer.html" title="class in nzilbb.ag">Layer</a>&nbsp;layer,
                                   SortedSet&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;these,
                                   SortedSet&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;those)
                            throws <a href="../TransformationException.html" title="class in nzilbb.ag">TransformationException</a></pre>
<div class="block">PHASE 1: Maps annotations from another fragment to annotations in this fragment, in order to
 then compute change deltas. 
 <p>Corresponding annotations in each graph are linked by having the "@other" attribute set.
 <p>Only annotations with the same participant (if any) can be linked as counterparts.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>layer</code> - Layer definition to use.</dd>
<dd><code>these</code> - Annotations from one layer in the graph to be merged into.</dd>
<dd><code>those</code> - Annotations from the same layer in <a href="#editedGraph"><code>editedGraph</code></a>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../TransformationException.html" title="class in nzilbb.ag">TransformationException</a></code> - On error.</dd>
</dl>
</li>
</ul>
<a id="removeLeadingMappedAnnotations(java.util.Vector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeLeadingMappedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeLeadingMappedAnnotations&#8203;(Vector&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;annotations)</pre>
<div class="block">Removes leading annotations from the list, up to and including the last mapped annotation
 (i.e. annotation with a non-null counterpart)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotations</code> - A list of annotations</dd>
</dl>
</li>
</ul>
<a id="changeStartWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeStartWithRelatedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;changeStartWithRelatedAnnotations&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                              <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newStartAnchor)</pre>
<div class="block">Sets the Start Anchor of the given annotation, and also the start anchors of related
 annotations that start in the same place.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation to change the start anchor of.</dd>
<dd><code>newStartAnchor</code> - The new start anchor.</dd>
</dl>
</li>
</ul>
<a id="changeStartWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeStartWithRelatedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;changeStartWithRelatedAnnotations&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                              <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newStartAnchor,
                                              String&nbsp;layerIdToExclude)</pre>
<div class="block">Sets the Start Anchor of the given annotation, and also the start anchors of related
 annotations that start in the same place.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose start anchor will be changed.</dd>
<dd><code>newStartAnchor</code> - The new start anchor.</dd>
<dd><code>layerIdToExclude</code> - A layer to exclude when updating related annotations.</dd>
</dl>
</li>
</ul>
<a id="changeStartWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeStartWithRelatedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;changeStartWithRelatedAnnotations&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                              <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newStartAnchor,
                                              Set&lt;String&gt;&nbsp;layerIdsToExclude)</pre>
<div class="block">Sets the StartAnchor of the given annotation, and also the start anchors of related
 annotations that start in the same place.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose start anchor will be changed.</dd>
<dd><code>newStartAnchor</code> - The new start anchor.</dd>
<dd><code>layerIdsToExclude</code> - Layers to exclude when updating related annotations.</dd>
</dl>
</li>
</ul>
<a id="changeEndWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeEndWithRelatedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;changeEndWithRelatedAnnotations&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                            <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newEndAnchor)</pre>
<div class="block">Sets the End Anchor of the given annotation, and also the end anchors of related annotations
 that end in the same place.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose end anchor should be changed.</dd>
<dd><code>newEndAnchor</code> - The new end anchor.</dd>
</dl>
</li>
</ul>
<a id="changeEndWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeEndWithRelatedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;changeEndWithRelatedAnnotations&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                            <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newEndAnchor,
                                            String&nbsp;layerIdToExclude)</pre>
<div class="block">Sets the End Anchor of the given annotation, and also the end anchors of related annotations
 that end in the same place.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose end anchor should be changed.</dd>
<dd><code>newEndAnchor</code> - The new end anchor.</dd>
<dd><code>layerIdToExclude</code> - A layer to exclude when updating related annotations.</dd>
</dl>
</li>
</ul>
<a id="changeEndWithRelatedAnnotations(nzilbb.ag.Annotation,nzilbb.ag.Anchor,java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeEndWithRelatedAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;changeEndWithRelatedAnnotations&#8203;(<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&nbsp;annotation,
                                            <a href="../Anchor.html" title="class in nzilbb.ag">Anchor</a>&nbsp;newEndAnchor,
                                            Set&lt;String&gt;&nbsp;layerIdsToExclude)</pre>
<div class="block">Sets the End Anchor of the given annotation, and also the end anchors of related annotations
 that end in the same place.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose end anchor should be changed.</dd>
<dd><code>newEndAnchor</code> - The new end anchor.</dd>
<dd><code>layerIdsToExclude</code> - Layers to exclude when updating related annotations.</dd>
</dl>
</li>
</ul>
<a id="removeDeleted(java.util.Collection)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeDeleted</h4>
<pre class="methodSignature">public&nbsp;Vector&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;removeDeleted&#8203;(Collection&lt;<a href="../Annotation.html" title="class in nzilbb.ag">Annotation</a>&gt;&nbsp;collection)</pre>
<div class="block">Removes elements from the collection that are marked for deletion.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>collection</code> - The collection to use</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new collection, all the elements of <var>collection</var> except those where
 <a href="../TrackedMap.html#getChange()"><code>TrackedMap.getChange()</code></a> is <a href="../Change.html" title="class in nzilbb.ag"><code>Change</code></a>.Operation.Destroy.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><i><a href='https://creativecommons.org/licenses/by-sa/2.0/' title='This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License.'><img src='/ag/cc.svg' alt='CC'><img src='/ag/by.svg' alt='-BY'><img src='/ag/sa.svg' alt='-SA'></a> NZILBB - October 9 2020</i></small></p>
</footer>
</body>
</html>
